<div class="transition-colors duration-150 ease-in-out">
  <h4 class="text-xl font-bold mb-4" data-theme="light:text-gray-900 dark:text-gray-100">Students</h4>

  <% if @students.any? %>
    <div class="overflow-x-auto">
      <table class="table w-full">
        <thead>
          <tr class="transition-colors duration-150 ease-in-out border-b-2" 
              data-theme="light:bg-gray-100 dark:bg-gray-800 light:border-gray-300 dark:border-gray-600">
            <th class="px-6 py-3 text-left transition-colors" data-theme="light:text-gray-900 dark:text-gray-200">Name</th>
            <th class="px-6 py-3 text-left transition-colors" data-theme="light:text-gray-900 dark:text-gray-200">Total Score</th>
            <th class="px-6 py-3 text-left transition-colors" data-theme="light:text-gray-900 dark:text-gray-200">Correct</th>
            <th class="px-6 py-3 text-left transition-colors" data-theme="light:text-gray-900 dark:text-gray-200">Incorrect</th>
            <th class="px-6 py-3 text-left transition-colors" data-theme="light:text-gray-900 dark:text-gray-200">Double Answer</th>
            <th class="px-6 py-3 text-left transition-colors" data-theme="light:text-gray-900 dark:text-gray-200">No Answer</th>
            <th class="px-6 py-3 text-left transition-colors" data-theme="light:text-gray-900 dark:text-gray-200">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @student_stats.each do |data| %>
            <% student = data[:student] %>
            <% stats = data[:stats] %>
            <tr class="transition-colors duration-150 ease-in-out border-b" 
                data-theme="light:border-gray-200 dark:border-gray-700 light:hover:bg-gray-50 dark:hover:bg-gray-800">
              <td class="px-6 py-4 transition-colors" data-theme="light:text-gray-900 dark:text-gray-200">
                <%= student.name %>
              </td>
              <td class="px-6 py-4">
                <div class="p-2 rounded transition-colors duration-150 ease-in-out" 
                     data-theme="light:text-gray-900 dark:text-gray-200 light:hover:bg-gray-100 dark:hover:bg-gray-700">
                  <%= stats[:total_score] %>
                </div>
              </td>
              <td class="px-6 py-4">
                <div class="p-2 rounded transition-colors duration-150 ease-in-out" 
                     data-theme="light:text-gray-900 dark:text-gray-200 light:hover:bg-gray-100 dark:hover:bg-gray-700">
                  <%= stats[:correct] %>
                </div>
              </td>
              <td class="px-6 py-4">
                <div class="p-2 rounded transition-colors duration-150 ease-in-out" 
                     data-theme="light:text-gray-900 dark:text-gray-200 light:hover:bg-gray-100 dark:hover:bg-gray-700">
                  <%= stats[:incorrect] %>
                </div>
              </td>
              <td class="px-6 py-4">
                <div class="p-2 rounded transition-colors duration-150 ease-in-out" 
                     data-theme="light:text-gray-900 dark:text-gray-200 light:hover:bg-gray-100 dark:hover:bg-gray-700">
                  <%= stats[:double_answer] %>
                </div>
              </td>
              <td class="px-6 py-4">
                <div class="p-2 rounded transition-colors duration-150 ease-in-out" 
                     data-theme="light:text-gray-900 dark:text-gray-200 light:hover:bg-gray-100 dark:hover:bg-gray-700">
                  <%= stats[:no_answer] %>
                </div>
              </td>
              <td class="px-6 py-4">
                <%= link_to "View Results", student_exam_overviews_teacher_papers_manage_path(id: @subject.id, exam_id: @exam.id, student_id: student.id), class: "btn btn-primary btn-sm" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <p class="text-center py-4 transition-colors" data-theme="light:text-gray-500 dark:text-gray-400">
      No students found for this exam.
    </p>
  <% end %>
</div>